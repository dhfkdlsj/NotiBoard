<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>View Posts</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>게시글 리스트</h1>
        <a href="/api/v1/posts/add" class="btn btn-primary">게시글 추가</a> <!-- 버튼 추가 -->
    </div>
    <table class="table">
        <thead>
        <tr>
            <th>제목</th>
        </tr>
        </thead>
        <tbody id="postsTableBody">
        <!-- 게시글 데이터가 여기에 추가됩니다. -->
        </tbody>
    </table>
</div>

<script>
    async function fetchPosts() {
        try {
            const response = await fetch('/api/v1/posts/view');
            const data = await response.json();

            const postsTableBody = document.getElementById('postsTableBody');
            postsTableBody.innerHTML = ''; // 기존 내용을 초기화

            data.forEach(post => {
                const row = document.createElement('tr');
                const titleCell = document.createElement('td');
                titleCell.textContent = post.title; // 제목을 셀에 추가
                row.appendChild(titleCell);
                postsTableBody.appendChild(row); // 테이블에 행 추가
            });
        } catch (error) {
            console.error('Error fetching posts:', error);
        }
    }

    // 페이지 로드 시 게시글 리스트 가져오기
    fetchPosts();
</script>
</body>
</html>
